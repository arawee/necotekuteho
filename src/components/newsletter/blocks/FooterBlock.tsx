import { NewsletterBlock } from '@/types/newsletter';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
interface FooterBlockProps {
  block: NewsletterBlock;
  onUpdate: (content: NewsletterBlock['content']) => void;
}

export const FooterBlock = ({ block, onUpdate }: FooterBlockProps) => {
  return (
    <div className="bg-white rounded-lg border border-border overflow-hidden">
      <div className="max-w-2xl mx-auto">
        {/* Main footer text */}
        <div className="p-6">
          <p 
            className="text-sm leading-relaxed"
            style={{ whiteSpace: 'pre-line' }}
            contentEditable
            suppressContentEditableWarning
            onBlur={(e) => onUpdate({ ...block.content, footerText: e.currentTarget.textContent || '' })}
          >
            {block.content.footerText}
          </p>
        </div>
        
        {/* Social section */}
        <div 
          className="p-6 grid grid-cols-5 items-center"
          style={{ backgroundColor: block.content.backgroundColor || '#F8F3EE' }}
        >
          <div className="col-span-2">
            <div className="w-16 h-24 flex items-center justify-center">
              <svg width="48" height="96" viewBox="0 0 64 128" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4.11009 110.26L5.09009 107.72L2.59009 101.29H3.97009L5.26009 104.84C5.43009 105.32 5.59009 105.81 5.75009 106.29C5.91009 105.81 6.07009 105.32 6.25009 104.84L7.52009 101.29H8.89009L5.42009 110.26H4.11009Z" fill="#EDDDCE"/>
                <path d="M14.1002 104.54C14.1002 103.15 13.4102 102.26 12.3102 102.26C11.2102 102.26 10.5202 103.15 10.5202 104.54C10.5202 105.93 11.2002 106.79 12.3102 106.79C13.4202 106.79 14.1002 105.91 14.1002 104.54ZM9.21021 104.54C9.21021 102.54 10.4602 101.15 12.3102 101.15C14.1602 101.15 15.4002 102.54 15.4002 104.54C15.4002 106.54 14.1602 107.91 12.3102 107.91C10.4602 107.91 9.21021 106.53 9.21021 104.54Z" fill="#EDDDCE"/>
                <path d="M21.11 104.34C21.11 102.99 20.4 102.27 19.3 102.27C18.26 102.27 17.54 102.89 17.54 104.34C17.54 105.79 18.26 106.39 19.3 106.39C20.4 106.39 21.11 105.69 21.11 104.34ZM16.55 108.4H17.84C18.01 109.03 18.59 109.35 19.37 109.35C20.41 109.35 21.04 108.77 21.04 107.72V106.39C20.59 107.14 19.89 107.49 19.04 107.49C17.36 107.49 16.23 106.31 16.23 104.34C16.23 102.37 17.36 101.16 19.03 101.16C19.87 101.16 20.6 101.5 21.04 102.27V101.28H22.31V107.66C22.31 109.62 20.99 110.39 19.36 110.39C17.73 110.39 16.71 109.66 16.54 108.39" fill="#EDDDCE"/>
                <path d="M27.68 105.34V104.58C27.5 104.72 26.82 104.83 26.13 104.92C25.43 105.02 24.79 105.28 24.79 105.93C24.79 106.49 25.26 106.82 26.01 106.82C27.15 106.82 27.68 106.13 27.68 105.34ZM23.51 105.91C23.51 104.43 24.75 104.12 26.06 103.96C27.27 103.81 27.68 103.83 27.68 103.35V103.29C27.68 102.67 27.2 102.21 26.38 102.21C25.56 102.21 24.99 102.66 24.94 103.25H23.67C23.73 102.02 24.78 101.15 26.4 101.15C28.02 101.15 28.97 102 28.97 103.31V107.75H27.7V106.83H27.68C27.41 107.35 26.88 107.85 25.77 107.85C24.48 107.85 23.53 107.19 23.53 105.9" fill="#EDDDCE"/>
                <path d="M3.17017 113.14H4.43017V114.22C4.83017 113.42 5.56017 113.01 6.36017 113.01C7.24017 113.01 7.95017 113.51 8.22017 114.2C8.57017 113.5 9.32017 113.01 10.2702 113.01C11.4702 113.01 12.4302 113.79 12.4302 115.35V119.61H11.1302V115.46C11.1302 114.54 10.5302 114.14 9.83017 114.14C8.97017 114.14 8.43017 114.73 8.43017 115.56V119.6H7.16017V115.37C7.16017 114.63 6.63017 114.14 5.89017 114.14C5.15017 114.14 4.46017 114.68 4.46017 115.7V119.6H3.17017V113.13V113.14Z" fill="#EDDDCE"/>
                <path d="M18.4501 116.39C18.4501 115 17.7601 114.11 16.6601 114.11C15.5601 114.11 14.8701 115 14.8701 116.39C14.8701 117.78 15.5501 118.64 16.6601 118.64C17.7701 118.64 18.4501 117.76 18.4501 116.39ZM13.5601 116.39C13.5601 114.39 14.8101 113 16.6601 113C18.5101 113 19.7501 114.39 19.7501 116.39C19.7501 118.39 18.5101 119.76 16.6601 119.76C14.8101 119.76 13.5601 118.38 13.5601 116.39Z" fill="#EDDDCE"/>
                <path d="M20.0801 113.14H21.4601L22.7501 116.69C22.9301 117.19 23.0901 117.7 23.2501 118.2C23.4101 117.7 23.5701 117.19 23.7501 116.69L25.0201 113.14H26.3901L23.9201 119.61H22.5501L20.0901 113.14H20.0801Z" fill="#EDDDCE"/>
                <path d="M31.4702 115.74C31.3702 114.71 30.7002 114.07 29.7202 114.07C28.7402 114.07 28.0902 114.71 27.9802 115.74H31.4702ZM26.7002 116.39C26.7002 114.42 27.9502 113 29.7102 113C31.4702 113 32.7302 114.38 32.7302 116.38V116.73H27.9702C28.0102 117.89 28.6602 118.68 29.8002 118.68C30.6402 118.68 31.2102 118.26 31.3902 117.65H32.6302C32.3902 118.9 31.2402 119.76 29.7802 119.76C27.8602 119.76 26.7002 118.35 26.7002 116.39Z" fill="#EDDDCE"/>
                <path d="M33.8501 113.14H35.1101V114.22C35.5101 113.42 36.2401 113.01 37.0401 113.01C37.9201 113.01 38.6301 113.51 38.9001 114.2C39.2501 113.5 40.0001 113.01 40.9501 113.01C42.1501 113.01 43.1101 113.79 43.1101 115.35V119.61H41.8101V115.46C41.8101 114.54 41.2101 114.14 40.5101 114.14C39.6501 114.14 39.1101 114.73 39.1101 115.56V119.6H37.8401V115.37C37.8401 114.63 37.3101 114.14 36.5701 114.14C35.8301 114.14 35.1401 114.68 35.1401 115.7V119.6H33.8501V113.13V113.14Z" fill="#EDDDCE"/>
                <path d="M49.02 115.74C48.92 114.71 48.25 114.07 47.27 114.07C46.29 114.07 45.64 114.71 45.53 115.74H49.02ZM44.24 116.39C44.24 114.42 45.49 113 47.25 113C49.01 113 50.27 114.38 50.27 116.38V116.73H45.51C45.55 117.89 46.2 118.68 47.34 118.68C48.18 118.68 48.75 118.26 48.93 117.65H50.17C49.93 118.9 48.78 119.76 47.32 119.76C45.4 119.76 44.24 118.35 44.24 116.39Z" fill="#EDDDCE"/>
                <path d="M52.6901 119.61H51.4001V113.14H52.6701V114.11C53.1101 113.38 53.7701 113.01 54.6201 113.01C55.9501 113.01 56.9601 113.89 56.9601 115.58V119.61H55.6701V115.74C55.6701 114.71 55.1501 114.17 54.2601 114.17C53.3701 114.17 52.7001 114.68 52.7001 115.89V119.61H52.6901Z" fill="#EDDDCE"/>
                <path d="M61.53 114.21H60.22V117.9C60.22 118.38 60.39 118.54 60.9 118.54H61.53V119.61H60.72C59.51 119.61 58.93 119.11 58.93 118.07V114.21H57.79V113.14H58.93V111.38H60.23V113.14H61.54V114.21H61.53Z" fill="#EDDDCE"/>
                <path d="M7.88992 61.7799C2.35992 62.2899 1.06992 69.3299 4.00992 73.4999C5.71992 76.3499 8.19992 78.7499 10.4499 81.1899C13.6399 84.5299 16.7299 88.1999 20.7599 89.8099C25.9299 92.0399 31.9299 89.6799 34.8399 84.9399C38.5899 78.8899 39.3599 71.3799 43.1399 65.2899C46.2399 59.6799 51.3999 55.1999 53.8199 49.4799C56.0599 44.3599 56.0099 38.5799 57.0899 33.1599C58.0099 27.8499 60.0599 22.7499 61.1799 17.5799C61.9199 14.0599 62.0399 9.93989 59.6399 7.05989C55.7399 2.31989 48.7699 4.92989 46.9899 10.2899C43.5499 18.3199 47.2799 29.0599 41.1999 36.1199C35.8999 40.5699 32.5499 31.8299 31.4199 27.6499C29.6299 21.9099 27.6099 16.2799 23.3699 12.0399C19.2699 8.01989 12.6299 3.60989 6.81992 6.03989C2.87992 7.97989 3.57992 12.5699 6.28992 15.4499C9.68992 19.3199 14.3899 22.1999 16.9199 26.8299C20.1699 32.2099 20.7599 39.3499 24.0399 44.7699C26.5599 49.2099 31.0999 52.6399 32.1399 57.8099C33.5399 63.2699 29.3099 71.5599 22.8199 69.3499C17.9699 67.7899 13.8199 61.2299 8.06992 61.7399L7.87992 61.7599L7.88992 61.7799Z" fill="#EDDDCE"/>
              </svg>
            </div>
          </div>
          
          <div className="col-span-3">
            <h4 className="text-sm font-medium mb-2" style={{ color: '#806C56' }}>
              Sledujte nás na
            </h4>
            <div className="flex gap-3 items-center mt-2">
              {/* Facebook */}
              <Dialog>
                <DialogTrigger asChild>
                  <button className="inline-flex items-center justify-center w-5 h-5" aria-label="Edit Facebook link">
                    <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 10.3038C20 4.74719 15.5229 0.242676 10 0.242676C4.47715 0.242676 0 4.74719 0 10.3038C0 15.3255 3.65684 19.4879 8.4375 20.2427V13.2121H5.89844V10.3038H8.4375V8.0872C8.4375 5.56564 9.9305 4.1728 12.2146 4.1728C13.3088 4.1728 14.4531 4.36931 14.4531 4.36931V6.84529H13.1922C11.95 6.84529 11.5625 7.6209 11.5625 8.41658V10.3038H14.3359L13.8926 13.2121H11.5625V20.2427C16.3432 19.4879 20 15.3257 20 10.3038Z" fill="#806C56"/>
                    </svg>
                  </button>
                </DialogTrigger>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>Upravit Facebook URL</DialogTitle>
                  </DialogHeader>
                  <div className="space-y-2">
                    <Label htmlFor="fb-url">URL</Label>
                    <Input
                      id="fb-url"
                      value={block.content.socialLinks?.[0]?.url || ''}
                      onChange={(e) => {
                        const socialLinks = [...(block.content.socialLinks || [])];
                        socialLinks[0] = { platform: 'facebook', url: e.target.value, icon: 'facebook' };
                        onUpdate({ ...block.content, socialLinks });
                      }}
                      placeholder="https://facebook.com/yourpage"
                    />
                  </div>
                </DialogContent>
              </Dialog>

              {/* Instagram */}
              <Dialog>
                <DialogTrigger asChild>
                  <button className="inline-flex items-center justify-center w-5 h-5" aria-label="Edit Instagram link">
                    <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fillRule="evenodd" clipRule="evenodd" d="M13 0.242676H5C2.23858 0.242676 0 2.48126 0 5.24268V13.2427C0 16.0041 2.23858 18.2427 5 18.2427H13C15.7614 18.2427 18 16.0041 18 13.2427V5.24268C18 2.48126 15.7614 0.242676 13 0.242676ZM16.25 13.2427C16.2445 15.0353 14.7926 16.4872 13 16.4927H5C3.20735 16.4872 1.75549 15.0353 1.75 13.2427V5.24268C1.75549 3.45003 3.20735 1.99817 5 1.99268H13C14.7926 1.99817 16.2445 3.45003 16.25 5.24268V13.2427ZM13.75 5.49268C14.3023 5.49268 14.75 5.04496 14.75 4.49268C14.75 3.9404 14.3023 3.49268 13.75 3.49268C13.1977 3.49268 12.75 3.9404 12.75 4.49268C12.75 5.04496 13.1977 5.49268 13.75 5.49268ZM9 4.74268C6.51472 4.74268 4.5 6.7574 4.5 9.24268C4.5 11.728 6.51472 13.7427 9 13.7427C11.4853 13.7427 13.5 11.728 13.5 9.24268C13.5027 8.04838 13.0294 6.90225 12.1849 6.05776C11.3404 5.21327 10.1943 4.74002 9 4.74268ZM6.25 9.24268C6.25 10.7615 7.4812 11.9927 9 11.9927C10.5188 11.9927 11.75 10.7615 11.75 9.24268C11.75 7.72388 10.5188 6.49268 9 6.49268C7.4812 6.49268 6.25 7.72388 6.25 9.24268Z" fill="#806C56"/>
                    </svg>
                  </button>
                </DialogTrigger>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>Upravit Instagram URL</DialogTitle>
                  </DialogHeader>
                  <div className="space-y-2">
                    <Label htmlFor="ig-url">URL</Label>
                    <Input
                      id="ig-url"
                      value={block.content.socialLinks?.[1]?.url || ''}
                      onChange={(e) => {
                        const socialLinks = [...(block.content.socialLinks || [])];
                        socialLinks[1] = { platform: 'instagram', url: e.target.value, icon: 'instagram' };
                        onUpdate({ ...block.content, socialLinks });
                      }}
                      placeholder="https://instagram.com/yourpage"
                    />
                  </div>
                </DialogContent>
              </Dialog>
              
            </div>
          </div>
        </div>
        
        {/* Copyright */}
        <div 
          className="px-6 py-4 flex justify-between items-center text-xs"
          style={{ backgroundColor: block.content.backgroundColor || '#F8F3EE', color: '#806C56' }}
        >
          <span>{block.content.copyright}</span>
          <a href={block.content.unsubscribeUrl} style={{ color: '#007BA0', textDecoration: 'underline', textUnderlineOffset: '3px' }}>
            Odhlásit od newsletteru
          </a>
        </div>
      </div>
    </div>
  );
};